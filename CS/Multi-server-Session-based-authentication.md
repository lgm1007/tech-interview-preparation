## 다중 서버 환경에서 세션 기반 인증 방식을 사용하는 경우 발생할 수 있는 문제점
### 세션 불일치 문제
* 다중 서버 환경에서 세션 기반 인증 방식을 사용하는 경우 **세션 불일치 문제**가 발생할 수 있다.
* 세션 불일치 예시
  1. 서버 A, B를 관리하고 있을 때, 유효한 로그인 요청이 A 서버로 처음 도착하면 사용자에 대한 세션 정보는 A 서버에 저장된다.
  2. 이후 해당 사용자의 또 다른 요청이 로드 밸런서로 인해 B 서버로 도착하게 되면 사용자의 세션 데이터가 존재하지 않기 때문에 요청이 제대로 처리되지 않는다.

### 세션 불일치 문제는 어떻게 해결할 수 있을까?
#### 세션 불일치 문제를 해결하는 3가지 방식
1. **스티키 세션 방식**
   * 사용자 요청이 **항상 사용자 세션 정보가 저장된 서버로 가도록 고정**하는 방식
   * 사용자 요청의 **쿠키**나 **IP**를 통해 어느 서버로 고정시킬지 결정한다.
   * 단순하다는 장점이 있으나, 특정 서버에 트래픽이 집중될 수 있다는 문제점과 사용자의 세션 정보를 가지고 있는 서버가 다운되면 해당 서버에 고정된 사용자는 다시 로그인해야 한다는 단점이 있다.
2. **세션 클러스터링 방식**
   * 특정 서버에 사용자 세션 정보가 생성될 때, **다른 서버로 정보를 복제**하는 방식
   * 여러 서버에 세션 정보를 중복으로 저장하므로 **스티키 세션의 트래픽 몰림 현상**과 **세션 정보 유실 문제를 해결**한다는 장점이 있다.
   * 세션 정보를 중복으로 저장한다는 점에서 **메모리를 비효율적**으로 사용하고, 세션 정보 복제 과정에서 발생하는 **네트워크 트래픽 문제**, 세션 정보 복제 지연으로 인한 **일시적인 세션 정보 유실 문제**가 발생할 수 있다.
3. **스토리지 분리 방식**
   * 세션 정보를 저장하는 공간을 **외부로 분리**하는 방식
   * 세션 클러스터링 방식, 스티키 세션 방식에서 발생하는 문제들을 해결할 수 있다.
   * 스토리지에 대한 **단일 장애 지점**이 문제가 될 수 있으며, 클러스터링과 같이 단일 장애 지점을 해소해도 복제 지연으로 인한 **일시적인 세션 정보 유실 문제**는 발생할 수 있다.
   * 외부 스토리지를 관리하기 위한 **추가적인 리소스**가 요구될 수 있다.
